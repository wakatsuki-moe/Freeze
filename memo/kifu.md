# **棋譜ファイル**

※ 当面は、kif/kifu形式(bod形式)、sfen(USI)形式 のみとします ^^;

* コメントでも良いかと
  * ダメ＞＜ 現状、将棋神 でだと、コメントは読み込むけど、表示せず、ファイルへ保存するとコメントは全て消えちゃう><
  * どうしようか；
    * なんとかする;^^

補足：
```
    64 ４五桂打     (0:00/00:00:00) (z金 先手3回 後手2回)
```

この形式で出力しても、「Kifu for Windows」「Shogidokoto」「ShogiGUI」で読み込めるのは確認済みです。

以下、
棋譜ヘッダにあったら「Freeze将棋」と判断 (Freeze将棋対応GUIで保存と判断)致します。

基本的に、コメントを優先とします
* 原則：Freeze将棋コメントは棋譜コメントの一行目だけを対象とします。
* 棋譜初手コメントにあったら 上記ヘッダより優先的に解釈(上書き)するとします。
* 棋譜ヘッダにも初手コメントになにもなくFreeze将棋コメントをみたら、「Freeze将棋だぉ」とだけ解釈するとします。
  * (次の指し手/フリーズ返し/フリーズ打ち歩詰め等のチェックはする;^^)

\<!--
以下は、保留中 ;^^

他のGUI様で考察した棋譜コメントでは人手での入力となるので回数に誤りがある事を鑑み、GUI側ではコメントの「回数」は付帯情報扱い、回数で不正棋譜と扱わないとします。
(その際にはメッセージでユーザ様へ通知はすべきではありますが読み込みは最後まで。棋譜上は将棋でありますから;^^) 
GUIでの棋譜保存時も回数の出力はオプションとし、デフォルトでは「出力無し」とします。

3回が公式ルールだけど、本稿では任意回としてるので;^^

棋譜コメントへの出力もオプションで良いかと思います。
ただ、棋譜コメントが無いと上記GUIではどこでフリーズがあったのかは判らなくなりますが;^^

\-->

---

## Freeze将棋棋譜フォーマット

案：

    #KIF version=2.0 encoding=UTF-8
    # ---- Kifu for Windows V7 V7.41 棋譜ファイル ----
    開始日時：2019/05/29(水)
    表題：【テスト配信】綾瀬綾Presents新感覚将棋【Freeze！将棋（フリーズ将棋）】VS エクトリアちゃん
    棋戦：フリーズ将棋(テスト配信)
    場所：将棋ウォーズ
    手合割：平手　　
    先手：綾瀬綾
    後手：エクトリア
    Freeze：先手 3回 後手 3回               (← Freeze将棋 設定)
    手数----指手---------消費時間--
    *Freeze 先手 x回 後手 x回
        棋譜コメントでなければ削除されないの確認
        棋譜コメント扱い 他のGUIでも読める) はず
    1 ５六歩(57)   ( 0:00/00:00:00)
    2 ４二銀(31)   ( 0:00/00:00:00)
    3 ５八飛(28)   ( 0:00/00:00:00)
    4 ５二飛(82)   ( 0:00/00:00:00)
    5 ７六歩(77)   ( 0:00/00:00:00)
    6 ６二銀(71)   ( 0:00/00:00:00)
    7 ４八玉(59)   ( 0:00/00:00:00)
    8 ３二金(41)   ( 0:00/00:00:00)
    9 ３八玉(48)   ( 0:00/00:00:00)
    10 ７二金(61)   ( 0:00/00:00:00)

    ・・・
    40 ４六角(24)   ( 0:00/00:00:00)
    *z金 先手3回 後手2回                                    (← 金でフリーズ)
    41 ３七銀(38)   ( 0:00/00:00:00)
    *Z金 先手3回 後手2回                                    (← 金が被フリーズ)
    ・・・

    ・・・
    63 同　金(48)   (0:00/00:00:00) (先手3回 後手2回)      (←通常の指し手)
    64 ４五桂打     (0:00/00:00:00) (z金 先手3回 後手2回)  (←フリーズ )
    65 同　銀(56)   (0:00/00:00:00) (Z金 先手3回 後手2回)  (←被フリーズ)
    ・・・

### Freeze将棋分岐棋譜 (変化：上記と同様)

案：

    ・・・
    変化：4手
    4 同　銀(71)    (00:00 / 00:00:00)
    *z銀 先手3回 後手2回 (← 銀でフリーズ)
    5 ６一金打      (00:00 / 00:00:00)
    *Z銀 先手3回 後手2回 (← 銀が被フリーズ)
    ・・・

    ・・・
    変化：4手
    4 同　銀(71)    (00:00 / 00:00:00) (Z飛車 先手3回 後手2回)  (← 飛車が被フリーズ)
    ・・・

### Freeze将棋局面

案：

      #KIF version=2.0 encoding=UTF-8
      # KIF形式棋譜ファイル
      # Generated by Shogidokoro
      Freeze：先手 3回 後手 3回               (← Freeze将棋 設定)
      後手の持駒：なし
      ９ ８ ７ ６ ５ ４ ３ ２ １
      +---------------------------+
      |v香v桂 ・v金 ・ ・ ・v桂v香|一
      | ・v玉v銀 ・ ・v飛 ・ ・ ・|二
      | ・ ・ ・v金v歩v銀v角v歩v歩|三
      |v歩v歩v歩v歩 ・v歩v歩 ・ ・|四
      | ・ ・ ・ ・ ・ ・ ・ ・ ・|五
      | ・ ・ 歩 歩 ・ ・ 歩 歩 歩|六
      | 歩 歩 桂 銀 歩 歩 ・ 銀 ・|七
      | 香 ・ ・ 角 飛 金 金 玉 香|八
      | ・ ・ ・ ・ ・ ・ ・ 桂 ・|九
      +---------------------------+
      先手の持駒：なし
      先手：人間
      後手：人間
      手数----指手---------消費時間--
      *Freeze Z歩 先手 x回 後手 y回  (←  フリーズ局面の時 回数は上記の初期設定への上書き)
      *Freeze 先手 x回 後手 y回     (←  フリーズ局面で無い時)

### sfen

[プロトコル：Freeze将棋 拡張案](usi_sfen.md) を参照を^^
